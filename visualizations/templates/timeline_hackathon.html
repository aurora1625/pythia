<!DOCTYPE html>
<meta charset="utf-8">
<link href='http://fonts.googleapis.com/css?family=Arvo' rel='stylesheet' type='text/css'>
<style>

svg {
  font: 15px sans-serif;
}

path {
  fill: none;
}

.axis path, .axis line {
  fill: none;
  stroke: #000;
  shape-rendering: crispEdges;
}

.brush .extent {
  stroke: #fff;
  fill-opacity: .125;
  shape-rendering: crispEdges;
}

.meta-column {
    font-family: "Arvo",serif;
	float: right;
	margin-right: 1px;
	width: 220px;
    height: 1000px;
}

.timeline-column {
	float: left;
}

.title {
	display: block;
	color: white;
	background-color: rgb(82, 84, 90);
	font-weight: bold;
}

</style>

<body>
<div id="left-col" class="timeline-column"></div>
<div id="meta-box" class="meta-column"></div>
<script src="../d3/d3.v2.js"></script>
<script>
var formatDate = d3.time.format('%Y-%m-%d %H:%M:%S');
var items = {"dates": [["2011-01-25 00:00:00", "2011-01-25 00:05:00", "2011-01-25 00:10:00", "2011-01-25 00:15:00", "2011-01-25 00:20:00", "2011-01-25 00:25:00", "2011-01-25 00:30:00", "2011-01-25 00:35:00", "2011-01-25 00:40:00", "2011-01-25 00:45:00", "2011-01-25 00:50:00", "2011-01-25 00:55:00", "2011-01-25 01:00:00", "2011-01-25 01:05:00", "2011-01-25 01:10:00", "2011-01-25 01:15:00", "2011-01-25 01:20:00", "2011-01-25 01:25:00", "2011-01-25 01:30:00", "2011-01-25 01:35:00", "2011-01-25 01:40:00", "2011-01-25 01:45:00", "2011-01-25 01:50:00", "2011-01-25 01:55:00", "2011-01-25 02:00:00", "2011-01-25 02:05:00", "2011-01-25 02:10:00", "2011-01-25 02:15:00", "2011-01-25 02:20:00", "2011-01-25 02:25:00", "2011-01-25 02:30:00", "2011-01-25 02:35:00", "2011-01-25 02:40:00", "2011-01-25 02:45:00", "2011-01-25 02:50:00", "2011-01-25 02:55:00", "2011-01-25 03:00:00", "2011-01-25 03:05:00", "2011-01-25 03:10:00", "2011-01-25 03:15:00", "2011-01-25 03:20:00", "2011-01-25 03:25:00", "2011-01-25 03:30:00", "2011-01-25 03:35:00", "2011-01-25 03:40:00", "2011-01-25 03:45:00", "2011-01-25 03:50:00", "2011-01-25 03:55:00", "2011-01-25 04:00:00", "2011-01-25 04:05:00", "2011-01-25 04:10:00", "2011-01-25 04:15:00", "2011-01-25 04:20:00", "2011-01-25 04:25:00", "2011-01-25 04:30:00", "2011-01-25 04:35:00", "2011-01-25 04:40:00", "2011-01-25 04:45:00", "2011-01-25 04:50:00", "2011-01-25 04:55:00", "2011-01-25 05:00:00", "2011-01-25 05:05:00", "2011-01-25 05:10:00", "2011-01-25 05:15:00", "2011-01-25 05:20:00", "2011-01-25 05:25:00", "2011-01-25 05:30:00", "2011-01-25 05:35:00", "2011-01-25 05:40:00", "2011-01-25 05:45:00", "2011-01-25 05:50:00", "2011-01-25 05:55:00", "2011-01-25 06:00:00", "2011-01-25 06:05:00", "2011-01-25 06:10:00", "2011-01-25 06:15:00", "2011-01-25 06:20:00", "2011-01-25 06:25:00", "2011-01-25 06:30:00", "2011-01-25 06:35:00", "2011-01-25 06:40:00", "2011-01-25 06:45:00", "2011-01-25 06:50:00", "2011-01-25 06:55:00", "2011-01-25 07:00:00", "2011-01-25 07:05:00", "2011-01-25 07:10:00", "2011-01-25 07:15:00", "2011-01-25 07:20:00", "2011-01-25 07:25:00", "2011-01-25 07:30:00", "2011-01-25 07:35:00", "2011-01-25 07:40:00", "2011-01-25 07:45:00", "2011-01-25 07:50:00", "2011-01-25 07:55:00", "2011-01-25 08:00:00", "2011-01-25 08:05:00", "2011-01-25 08:10:00", "2011-01-25 08:15:00", "2011-01-25 08:20:00", "2011-01-25 08:25:00", "2011-01-25 08:30:00", "2011-01-25 08:35:00", "2011-01-25 08:40:00", "2011-01-25 08:45:00", "2011-01-25 08:50:00", "2011-01-25 08:55:00", "2011-01-25 09:00:00", "2011-01-25 09:05:00", "2011-01-25 09:10:00", "2011-01-25 09:15:00", "2011-01-25 09:20:00", "2011-01-25 09:25:00", "2011-01-25 09:30:00", "2011-01-25 09:35:00", "2011-01-25 09:40:00", "2011-01-25 09:45:00", "2011-01-25 09:50:00", "2011-01-25 09:55:00", "2011-01-25 10:00:00", "2011-01-25 10:05:00", "2011-01-25 10:10:00", "2011-01-25 10:15:00", "2011-01-25 10:20:00", "2011-01-25 10:25:00", "2011-01-25 10:30:00", "2011-01-25 10:35:00", "2011-01-25 10:40:00", "2011-01-25 10:45:00", "2011-01-25 10:50:00", "2011-01-25 10:55:00", "2011-01-25 11:00:00", "2011-01-25 11:05:00", "2011-01-25 11:10:00", "2011-01-25 11:15:00", "2011-01-25 11:20:00", "2011-01-25 11:25:00", "2011-01-25 11:30:00", "2011-01-25 11:35:00", "2011-01-25 11:40:00", "2011-01-25 11:45:00", "2011-01-25 11:50:00", "2011-01-25 11:55:00", "2011-01-25 12:00:00", "2011-01-25 12:05:00", "2011-01-25 12:10:00", "2011-01-25 12:15:00", "2011-01-25 12:20:00", "2011-01-25 12:25:00", "2011-01-25 12:30:00", "2011-01-25 12:35:00", "2011-01-25 12:40:00", "2011-01-25 12:45:00", "2011-01-25 12:50:00", "2011-01-25 12:55:00", "2011-01-25 13:00:00", "2011-01-25 13:05:00", "2011-01-25 13:10:00", "2011-01-25 13:15:00", "2011-01-25 13:20:00", "2011-01-25 13:25:00", "2011-01-25 13:30:00", "2011-01-25 13:35:00", "2011-01-25 13:40:00", "2011-01-25 13:45:00", "2011-01-25 13:50:00", "2011-01-25 13:55:00", "2011-01-25 14:00:00", "2011-01-25 14:05:00", "2011-01-25 14:10:00", "2011-01-25 14:15:00", "2011-01-25 14:20:00", "2011-01-25 14:25:00", "2011-01-25 14:30:00", "2011-01-25 14:35:00", "2011-01-25 14:40:00", "2011-01-25 14:45:00", "2011-01-25 14:50:00", "2011-01-25 14:55:00", "2011-01-25 15:00:00", "2011-01-25 15:05:00", "2011-01-25 15:10:00", "2011-01-25 15:15:00", "2011-01-25 15:20:00", "2011-01-25 15:25:00", "2011-01-25 15:30:00", "2011-01-25 15:35:00", "2011-01-25 15:40:00", "2011-01-25 15:45:00", "2011-01-25 15:50:00", "2011-01-25 15:55:00", "2011-01-25 16:00:00", "2011-01-25 16:05:00", "2011-01-25 16:10:00", "2011-01-25 16:15:00", "2011-01-25 16:20:00", "2011-01-25 16:25:00", "2011-01-25 16:30:00", "2011-01-25 16:35:00", "2011-01-25 16:40:00", "2011-01-25 16:45:00", "2011-01-25 16:50:00", "2011-01-25 16:55:00", "2011-01-25 17:00:00", "2011-01-25 17:05:00", "2011-01-25 17:10:00", "2011-01-25 17:15:00", "2011-01-25 17:20:00", "2011-01-25 17:25:00", "2011-01-25 17:30:00", "2011-01-25 17:35:00", "2011-01-25 17:40:00", "2011-01-25 17:45:00", "2011-01-25 17:50:00", "2011-01-25 17:55:00", "2011-01-25 18:00:00", "2011-01-25 18:05:00", "2011-01-25 18:10:00", "2011-01-25 18:15:00", "2011-01-25 18:20:00", "2011-01-25 18:25:00", "2011-01-25 18:30:00", "2011-01-25 18:35:00", "2011-01-25 18:40:00", "2011-01-25 18:45:00", "2011-01-25 18:50:00", "2011-01-25 18:55:00", "2011-01-25 19:00:00", "2011-01-25 19:05:00", "2011-01-25 19:10:00", "2011-01-25 19:15:00", "2011-01-25 19:20:00", "2011-01-25 19:25:00", "2011-01-25 19:30:00", "2011-01-25 19:35:00", "2011-01-25 19:40:00", "2011-01-25 19:45:00", "2011-01-25 19:50:00", "2011-01-25 19:55:00", "2011-01-25 20:00:00", "2011-01-25 20:05:00", "2011-01-25 20:10:00", "2011-01-25 20:15:00", "2011-01-25 20:20:00", "2011-01-25 20:25:00", "2011-01-25 20:30:00", "2011-01-25 20:35:00", "2011-01-25 20:40:00", "2011-01-25 20:45:00", "2011-01-25 20:50:00", "2011-01-25 20:55:00", "2011-01-25 21:00:00", "2011-01-25 21:05:00", "2011-01-25 21:10:00", "2011-01-25 21:15:00", "2011-01-25 21:20:00", "2011-01-25 21:25:00", "2011-01-25 21:30:00", "2011-01-25 21:35:00", "2011-01-25 21:40:00", "2011-01-25 21:45:00", "2011-01-25 21:50:00", "2011-01-25 21:55:00", "2011-01-25 22:00:00", "2011-01-25 22:05:00", "2011-01-25 22:10:00", "2011-01-25 22:15:00", "2011-01-25 22:20:00", "2011-01-25 22:25:00", "2011-01-25 22:30:00", "2011-01-25 22:35:00", "2011-01-25 22:40:00", "2011-01-25 22:45:00", "2011-01-25 22:50:00", "2011-01-25 22:55:00", "2011-01-25 23:00:00", "2011-01-25 23:05:00", "2011-01-25 23:10:00", "2011-01-25 23:15:00", "2011-01-25 23:20:00", "2011-01-25 23:25:00", "2011-01-25 23:30:00", "2011-01-25 23:35:00", "2011-01-25 23:40:00", "2011-01-25 23:45:00", "2011-01-25 23:50:00", "2011-01-25 23:55:00", "2011-01-26 00:00:00", "2011-01-26 00:05:00", "2011-01-26 00:10:00", "2011-01-26 00:15:00", "2011-01-26 00:20:00", "2011-01-26 00:25:00", "2011-01-26 00:30:00", "2011-01-26 00:35:00", "2011-01-26 00:40:00", "2011-01-26 00:45:00", "2011-01-26 00:50:00", "2011-01-26 00:55:00", "2011-01-26 01:00:00", "2011-01-26 01:05:00", "2011-01-26 01:10:00", "2011-01-26 01:15:00", "2011-01-26 01:20:00", "2011-01-26 01:25:00", "2011-01-26 01:30:00", "2011-01-26 01:35:00", "2011-01-26 01:40:00", "2011-01-26 01:45:00", "2011-01-26 01:50:00", "2011-01-26 01:55:00", "2011-01-26 02:00:00", "2011-01-26 02:05:00", "2011-01-26 02:10:00", "2011-01-26 02:15:00", "2011-01-26 02:20:00", "2011-01-26 02:25:00", "2011-01-26 02:30:00", "2011-01-26 02:35:00", "2011-01-26 02:40:00", "2011-01-26 02:45:00", "2011-01-26 02:50:00", "2011-01-26 02:55:00", "2011-01-26 03:00:00", "2011-01-26 03:10:00", "2011-01-26 03:15:00", "2011-01-26 03:20:00", "2011-01-26 03:25:00", "2011-01-26 03:30:00", "2011-01-26 03:35:00", "2011-01-26 03:40:00", "2011-01-26 03:45:00", "2011-01-26 03:50:00", "2011-01-26 03:55:00", "2011-01-26 04:00:00", "2011-01-26 04:05:00", "2011-01-26 04:10:00", "2011-01-26 04:15:00", "2011-01-26 04:20:00", "2011-01-26 04:25:00", "2011-01-26 04:30:00", "2011-01-26 04:35:00", "2011-01-26 04:40:00", "2011-01-26 04:45:00", "2011-01-26 04:50:00", "2011-01-26 04:55:00", "2011-01-26 05:00:00", "2011-01-26 05:05:00", "2011-01-26 05:10:00", "2011-01-26 05:15:00", "2011-01-26 05:20:00", "2011-01-26 05:25:00", "2011-01-26 05:30:00", "2011-01-26 05:35:00", "2011-01-26 05:40:00", "2011-01-26 05:45:00", "2011-01-26 05:50:00", "2011-01-26 05:55:00", "2011-01-26 06:00:00", "2011-01-26 06:05:00", "2011-01-26 06:10:00", "2011-01-26 06:15:00", "2011-01-26 06:20:00", "2011-01-26 06:25:00", "2011-01-26 06:30:00", "2011-01-26 06:35:00", "2011-01-26 06:40:00", "2011-01-26 06:45:00", "2011-01-26 06:50:00", "2011-01-26 06:55:00", "2011-01-26 07:00:00", "2011-01-26 07:05:00", "2011-01-26 07:10:00", "2011-01-26 07:15:00", "2011-01-26 07:20:00", "2011-01-26 07:25:00", "2011-01-26 07:30:00", "2011-01-26 07:35:00", "2011-01-26 07:40:00", "2011-01-26 07:45:00", "2011-01-26 07:50:00", "2011-01-26 07:55:00", "2011-01-26 08:00:00", "2011-01-26 08:05:00", "2011-01-26 08:10:00", "2011-01-26 08:15:00", "2011-01-26 08:20:00", "2011-01-26 08:25:00", "2011-01-26 08:30:00", "2011-01-26 08:35:00", "2011-01-26 08:40:00", "2011-01-26 08:45:00", "2011-01-26 08:50:00", "2011-01-26 08:55:00", "2011-01-26 09:00:00", "2011-01-26 09:05:00", "2011-01-26 09:10:00", "2011-01-26 09:15:00", "2011-01-26 09:20:00", "2011-01-26 09:25:00", "2011-01-26 09:30:00", "2011-01-26 09:35:00", "2011-01-26 09:40:00", "2011-01-26 09:45:00", "2011-01-26 09:50:00", "2011-01-26 09:55:00", "2011-01-26 10:00:00", "2011-01-26 10:05:00", "2011-01-26 10:10:00", "2011-01-26 10:15:00", "2011-01-26 10:20:00", "2011-01-26 10:25:00", "2011-01-26 10:30:00", "2011-01-26 10:35:00", "2011-01-26 10:40:00", "2011-01-26 10:45:00", "2011-01-26 10:50:00", "2011-01-26 10:55:00", "2011-01-26 11:00:00", "2011-01-26 11:05:00", "2011-01-26 11:10:00", "2011-01-26 11:15:00", "2011-01-26 11:20:00", "2011-01-26 11:25:00", "2011-01-26 11:30:00", "2011-01-26 11:35:00", "2011-01-26 11:40:00", "2011-01-26 11:45:00", "2011-01-26 11:50:00", "2011-01-26 11:55:00", "2011-01-26 12:00:00", "2011-01-26 12:05:00", "2011-01-26 12:10:00", "2011-01-26 12:15:00", "2011-01-26 12:20:00", "2011-01-26 12:25:00", "2011-01-26 12:30:00", "2011-01-26 12:35:00", "2011-01-26 12:40:00", "2011-01-26 12:45:00", "2011-01-26 12:50:00", "2011-01-26 12:55:00", "2011-01-26 13:00:00", "2011-01-26 13:05:00", "2011-01-26 13:10:00", "2011-01-26 13:15:00", "2011-01-26 13:20:00", "2011-01-26 13:25:00", "2011-01-26 13:30:00", "2011-01-26 13:35:00", "2011-01-26 13:40:00", "2011-01-26 13:45:00", "2011-01-26 13:50:00", "2011-01-26 13:55:00", "2011-01-26 14:00:00", "2011-01-26 14:05:00", "2011-01-26 14:10:00", "2011-01-26 14:15:00", "2011-01-26 14:20:00", "2011-01-26 14:25:00", "2011-01-26 14:30:00", "2011-01-26 14:35:00", "2011-01-26 14:40:00", "2011-01-26 14:45:00", "2011-01-26 14:50:00", "2011-01-26 14:55:00", "2011-01-26 15:00:00", "2011-01-26 15:05:00", "2011-01-26 15:10:00", "2011-01-26 15:15:00", "2011-01-26 15:20:00", "2011-01-26 15:25:00", "2011-01-26 15:30:00", "2011-01-26 15:35:00", "2011-01-26 15:40:00", "2011-01-26 15:45:00", "2011-01-26 15:50:00", "2011-01-26 15:55:00", "2011-01-26 16:00:00", "2011-01-26 16:05:00", "2011-01-26 16:10:00", "2011-01-26 16:15:00", "2011-01-26 16:20:00", "2011-01-26 16:25:00", "2011-01-26 16:30:00", "2011-01-26 16:35:00", "2011-01-26 16:40:00", "2011-01-26 16:45:00", "2011-01-26 16:50:00", "2011-01-26 16:55:00", "2011-01-26 17:00:00", "2011-01-26 17:05:00", "2011-01-26 17:10:00", "2011-01-26 17:15:00", "2011-01-26 17:20:00", "2011-01-26 17:25:00", "2011-01-26 17:30:00", "2011-01-26 17:35:00", "2011-01-26 17:40:00", "2011-01-26 17:45:00", "2011-01-26 17:50:00", "2011-01-26 17:55:00", "2011-01-26 18:00:00", "2011-01-26 18:05:00", "2011-01-26 18:10:00", "2011-01-26 18:15:00", "2011-01-26 18:20:00", "2011-01-26 18:25:00", "2011-01-26 18:30:00", "2011-01-26 18:35:00", "2011-01-26 18:40:00", "2011-01-26 18:45:00", "2011-01-26 18:50:00", "2011-01-26 18:55:00", "2011-01-26 19:00:00", "2011-01-26 19:05:00", "2011-01-26 19:10:00", "2011-01-26 19:15:00", "2011-01-26 19:20:00", "2011-01-26 19:25:00", "2011-01-26 19:30:00", "2011-01-26 19:35:00", "2011-01-26 19:40:00", "2011-01-26 19:45:00", "2011-01-26 19:50:00", "2011-01-26 19:55:00", "2011-01-26 20:00:00", "2011-01-26 20:05:00", "2011-01-26 20:10:00", "2011-01-26 20:15:00", "2011-01-26 20:20:00", "2011-01-26 20:25:00", "2011-01-26 20:30:00", "2011-01-26 20:35:00", "2011-01-26 20:40:00", "2011-01-26 20:45:00", "2011-01-26 20:50:00", "2011-01-26 20:55:00", "2011-01-26 21:00:00", "2011-01-26 21:05:00", "2011-01-26 21:10:00", "2011-01-26 21:15:00", "2011-01-26 21:20:00", "2011-01-26 21:25:00", "2011-01-26 21:30:00", "2011-01-26 21:35:00", "2011-01-26 21:40:00", "2011-01-26 21:45:00", "2011-01-26 21:50:00", "2011-01-26 21:55:00", "2011-01-26 22:00:00", "2011-01-26 22:05:00", "2011-01-26 22:10:00", "2011-01-26 22:15:00", "2011-01-26 22:20:00", "2011-01-26 22:25:00", "2011-01-26 22:30:00", "2011-01-26 22:35:00", "2011-01-26 22:40:00", "2011-01-26 22:45:00", "2011-01-26 22:50:00", "2011-01-26 22:55:00", "2011-01-26 23:00:00", "2011-01-26 23:05:00", "2011-01-26 23:10:00", "2011-01-26 23:15:00", "2011-01-26 23:20:00", "2011-01-26 23:25:00", "2011-01-26 23:30:00", "2011-01-26 23:35:00", "2011-01-26 23:40:00", "2011-01-26 23:45:00", "2011-01-26 23:50:00", "2011-01-26 23:55:00", "2011-01-27 00:00:00"]], "meta": {}, "counts": [[2.0, 6.0, 11.0, 17.0, 20.0, 28.0, 31.0, 35.0, 39.0, 46.0, 50.0, 55.0, 60.0, 75.0, 84.0, 95.0, 104.0, 110.0, 115.0, 124.0, 127.0, 133.0, 135.0, 136.0, 138.0, 140.0, 144.0, 146.0, 150.0, 151.0, 154.0, 155.0, 162.0, 168.0, 173.0, 181.0, 187.0, 196.0, 202.0, 209.0, 215.0, 218.0, 229.0, 239.0, 245.0, 247.0, 249.0, 254.0, 259.0, 262.0, 270.0, 279.0, 283.0, 287.0, 296.0, 305.0, 310.0, 317.0, 324.0, 336.0, 342.0, 351.0, 358.0, 363.0, 371.0, 379.0, 386.0, 392.0, 396.0, 400.0, 404.0, 409.0, 415.0, 416.0, 421.0, 427.0, 429.0, 434.0, 439.0, 443.0, 448.0, 454.0, 459.0, 466.0, 475.0, 483.0, 491.0, 493.0, 501.0, 515.0, 529.0, 544.0, 546.0, 557.0, 573.0, 581.0, 594.0, 618.0, 635.0, 656.0, 677.0, 698.0, 718.0, 733.0, 760.0, 775.0, 803.0, 839.0, 870.0, 903.0, 936.0, 979.0, 1007.0, 1037.0, 1071.0, 1108.0, 1149.0, 1190.0, 1224.0, 1265.0, 1300.0, 1321.0, 1346.0, 1372.0, 1391.0, 1425.0, 1453.0, 1487.0, 1510.0, 1546.0, 1582.0, 1624.0, 1663.0, 1700.0, 1733.0, 1774.0, 1810.0, 1870.0, 1931.0, 1989.0, 2060.0, 2101.0, 2150.0, 2196.0, 2242.0, 2296.0, 2362.0, 2432.0, 2505.0, 2575.0, 2667.0, 2742.0, 2815.0, 2906.0, 2995.0, 3073.0, 3165.0, 3232.0, 3311.0, 3393.0, 3479.0, 3559.0, 3661.0, 3770.0, 3865.0, 3972.0, 4067.0, 4143.0, 4245.0, 4349.0, 4429.0, 4508.0, 4592.0, 4688.0, 4782.0, 4871.0, 4959.0, 5059.0, 5127.0, 5185.0, 5250.0, 5335.0, 5427.0, 5525.0, 5631.0, 5720.0, 5818.0, 5907.0, 5991.0, 6078.0, 6172.0, 6246.0, 6320.0, 6397.0, 6500.0, 6605.0, 6671.0, 6775.0, 6879.0, 6984.0, 7105.0, 7191.0, 7316.0, 7448.0, 7558.0, 7641.0, 7735.0, 7829.0, 7939.0, 8053.0, 8161.0, 8263.0, 8342.0, 8454.0, 8563.0, 8654.0, 8741.0, 8818.0, 8901.0, 9010.0, 9098.0, 9211.0, 9294.0, 9388.0, 9508.0, 9579.0, 9679.0, 9793.0, 9911.0, 9978.0, 10091.0, 10156.0, 10255.0, 10356.0, 10469.0, 10590.0, 10718.0, 10843.0, 10980.0, 11104.0, 11131.0, 11275.0, 11411.0, 11516.0, 11573.0, 11671.0, 11725.0, 11837.0, 11951.0, 12059.0, 12167.0, 12242.0, 12341.0, 12487.0, 12607.0, 12725.0, 12837.0, 12949.0, 13021.0, 13133.0, 13249.0, 13358.0, 13441.0, 13542.0, 13646.0, 13728.0, 13848.0, 13962.0, 14060.0, 14154.0, 14229.0, 14318.0, 14444.0, 14594.0, 14750.0, 14906.0, 15051.0, 15187.0, 15349.0, 15482.0, 15607.0, 15729.0, 15871.0, 16024.0, 16159.0, 16289.0, 16535.0, 16671.0, 16803.0, 16919.0, 17037.0, 17147.0, 17253.0, 17365.0, 17463.0, 17558.0, 17654.0, 17753.0, 17839.0, 17931.0, 18023.0, 18093.0, 18172.0, 18273.0, 18320.0, 18372.0, 18447.0, 18511.0, 18559.0, 18628.0, 18687.0, 18740.0, 18780.0, 18835.0, 18863.0, 18888.0, 18919.0, 18949.0, 18979.0, 19006.0, 19042.0, 19084.0, 19126.0, 19175.0, 19210.0, 19239.0, 19283.0, 19316.0, 19349.0, 19385.0, 19413.0, 19438.0, 19457.0, 19497.0, 19522.0, 19544.0, 19577.0, 19608.0, 19628.0, 19649.0, 19676.0, 19707.0, 19743.0, 19784.0, 19812.0, 19829.0, 19854.0, 19875.0, 19906.0, 19936.0, 19960.0, 19981.0, 20002.0, 20032.0, 20062.0, 20098.0, 20120.0, 20140.0, 20166.0, 20191.0, 20219.0, 20249.0, 20268.0, 20289.0, 20316.0, 20343.0, 20363.0, 20392.0, 20423.0, 20454.0, 20488.0, 20523.0, 20562.0, 20590.0, 20622.0, 20642.0, 20653.0, 20688.0, 20726.0, 20770.0, 20800.0, 20821.0, 20846.0, 20871.0, 20907.0, 20954.0, 20991.0, 21037.0, 21080.0, 21106.0, 21158.0, 21198.0, 21242.0, 21271.0, 21295.0, 21324.0, 21366.0, 21401.0, 21437.0, 21473.0, 21522.0, 21572.0, 21628.0, 21673.0, 21730.0, 21770.0, 21817.0, 21862.0, 21920.0, 21968.0, 22018.0, 22063.0, 22128.0, 22173.0, 22226.0, 22279.0, 22327.0, 22370.0, 22415.0, 22460.0, 22502.0, 22539.0, 22576.0, 22625.0, 22682.0, 22738.0, 22788.0, 22852.0, 22931.0, 22992.0, 23056.0, 23108.0, 23181.0, 23245.0, 23316.0, 23378.0, 23463.0, 23525.0, 23602.0, 23679.0, 23757.0, 23822.0, 23866.0, 23924.0, 23991.0, 24052.0, 24137.0, 24218.0, 24301.0, 24391.0, 24500.0, 24615.0, 24720.0, 24802.0, 24886.0, 24976.0, 25055.0, 25154.0, 25242.0, 25322.0, 25420.0, 25514.0, 25597.0, 25707.0, 25819.0, 25914.0, 26018.0, 26146.0, 26268.0, 26362.0, 26461.0, 26586.0, 26714.0, 26840.0, 26962.0, 27100.0, 27206.0, 27311.0, 27423.0, 27529.0, 27646.0, 27781.0, 27880.0, 28002.0, 28098.0, 28213.0, 28310.0, 28399.0, 28487.0, 28563.0, 28627.0, 28713.0, 28786.0, 28881.0, 28977.0, 29071.0, 29161.0, 29259.0, 29346.0, 29411.0, 29489.0, 29575.0, 29672.0, 29764.0, 29843.0, 29925.0, 30017.0, 30110.0, 30165.0, 30268.0, 30360.0, 30425.0, 30512.0, 30585.0, 30684.0, 30763.0, 30824.0, 30918.0, 30998.0, 31084.0, 31184.0, 31271.0, 31374.0, 31474.0, 31575.0, 31695.0, 31785.0, 31875.0, 31992.0, 32136.0, 32262.0, 32387.0, 32491.0, 32592.0, 32709.0, 32871.0, 32993.0, 33121.0, 33270.0, 33411.0, 33522.0, 33652.0, 33779.0, 33897.0, 33979.0, 34097.0, 34204.0, 34348.0, 34455.0, 34554.0, 34691.0, 34819.0, 34948.0, 35075.0, 35215.0, 35301.0, 35423.0, 35550.0, 35699.0, 35823.0, 35941.0, 36045.0, 36119.0, 36214.0, 36297.0, 36377.0, 36465.0, 36561.0, 36658.0, 36760.0, 36849.0, 36937.0, 37021.0, 37079.0, 37169.0, 37242.0]]}

var meta = items.meta
var series = []

for (var i=0; i<items.dates.length; i++){
	series[i] = []
	for (var j=0; j<items.dates[i].length; j++){
		series[i][j] = {date: formatDate.parse(items.dates[i][j]), price:items.counts[i][j]}
	}
}

var color = d3.scale.category20c();

var margin = {top: 10, right: 10, bottom: 100, left: 55},
    margin2 = {top: 430, right: 10, bottom: 20, left: 55},
    width = 1600 - margin.left - margin.right,
    height = 500 - margin.top - margin.bottom,
    height2 = 500 - margin2.top - margin2.bottom;

var x = d3.time.scale().range([0, width]),
    x2 = d3.time.scale().range([0, width]),
    y = d3.scale.linear().range([height, 0]),
    y2 = d3.scale.linear().range([height2, 0]);

var xAxis = d3.svg.axis().scale(x).orient("bottom"),
    xAxis2 = d3.svg.axis().scale(x2).orient("bottom"),
    yAxis = d3.svg.axis().scale(y).orient("left");

var brush = d3.svg.brush()
    .x(x2)
    .on("brush", brush);

var area = d3.svg.line()
			 .x(function(d) { return x(d.date); })
			 .y(function(d) { return y(d.price); })
			 .interpolate("monotone");
			 
var area2 = d3.svg.line()
    .x(function(d) { return x2(d.date); })
    .y(function(d) { return y2(d.price); })
    .interpolate("monotone");
    
var svg = d3.select("body").append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
    
timelineCol = d3.select("#left-col")
timelineCol.append("svg").attr("d", svg);

svg.append("defs").append("clipPath")
    .attr("id", "clip")
    .append("rect")
    .attr("width", width)
    .attr("height", height);

var focus = svg.append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")")
    
var context = svg.append("g")
    .attr("transform", "translate(" + margin2.left + "," + margin2.top + ")"); 

//Find extent of x domain and the max value of y domain. Iterate over all extents and find the largest extent
//x domain must be scaled according to the largest extent
var maxx = d3.max(series[0].map(function(d) { return d.date; }));
var minx = d3.min(series[0].map(function(d) { return d.date; }));
var maxy = 0;
for (var i=0; i<series.length; i++){
	var temp_maxx = d3.max(series[i].map(function(d) { return d.date; }));
	if (temp_maxx > maxx){
		maxx = temp_maxx;
	}
	var temp_minx = d3.min(series[i].map(function(d) { return d.date; }));
	if (temp_minx < minx){
		minx = temp_minx;
	}
	var temp_maxy = d3.max(series[i].map(function(d) { return d.price; }));
	if (temp_maxy > maxy){
		maxy = temp_maxy;
	}
}
console.log(maxx);
console.log(minx);

//Sets the x domain to be equal to the width of the extent	
x.domain([minx, maxx]);
y.domain([0, maxy]);
x2.domain(x.domain());
y2.domain(y.domain());

//Appends the large chart
focus.selectAll(".line")
    .data(series)
    .enter()
    .append("path")
    .attr("clip-path", "url(#clip)")
    .attr("d", area)
    .attr("stroke", function(d, i) {return color(i)})
    .attr("stroke-width", 3)
    .on("click", click);

//Appends the x axis
focus.append("g")
    .attr("class", "x axis")
    .attr("transform", "translate(0," + height + ")")
    .call(xAxis);

//Appends the y axis
focus.append("g")
    .attr("class", "y axis")
    .call(yAxis);

//Appends the small chart
context.selectAll(".line")
    .data(series)
    .enter()
    .append("path")
    .attr("d", area2)
	.attr("stroke", function(d, i) {return color(i)});

//Appends the x axis of the small chart
context.append("g")
    .attr("class", "x axis")
    .attr("transform", "translate(0," + height2 + ")")
    .call(xAxis2);

//Appends the brush of the small chart
context.append("g")
    .attr("class", "x brush")
    .call(brush)
    .selectAll("rect")
    .attr("y", -6)
    .attr("height", height2);

function brush() {
  x.domain(brush.empty() ? x2.domain() : brush.extent());
  focus.selectAll("path").attr("d", area);
  focus.select(".x.axis").call(xAxis);
}

//-------------------EVENT HANDLERS ---------------//

function click(d, i){
	
	if (meta){
		//Appends events to show coords
		focus.selectAll("circle") 
          .data(meta) 
          .enter() 
          .append("circle") 
          .attr("cx", function(d) { return x(formatDate.parse(d.date)); }) 
          .attr("cy", function(d) {    var date = formatDate.parse(d.date);
                                       for (var i = 0; i<series[0].length; i++) 
          								if (date - series[0][i].date == 0) {
          									return y(series[0][i].price);
          								}
           					      }) 
          .attr("r", 8) 
          .attr("opacity", 1) 
          .attr("fill", d3.rgb(0, 0, 0))
          .on("click", clickDot)
          .on("mouseover", mouseoverDot)
          .on("mouseout", mouseoutDot)
          .append("svg:title").text(function(d) {return "Date: " + d.date + 
          												"\nTitle: " + d.title + 
          												"\nLocation: " + d.locations +
          												"\nUsers: " + d.authors;});
	}
}

function mouseoverDot(d, i){
	var circle = d3.select(this)
	circle.attr("r", 10);
	circle.attr("fill", d3.rgb(255, 0, 0))
}

function mouseoutDot(d, i){
	var circle = d3.select(this)
	circle.attr("r", 8);
	circle.attr("fill", d3.rgb(0, 0, 0))
}

function clickDot(d, i){
	console.log(d.keywords);
	console.log(d.authors);
	console.log(d.namedEntities);
	console.log(d.locations);
}
</script>