<!DOCTYPE html>
<meta charset="utf-8">
<style>

svg {
  font: 10px sans-serif;
}

path {
  fill: none;
}

.axis path, .axis line {
  fill: none;
  stroke: #000;
  shape-rendering: crispEdges;
}

.brush .extent {
  stroke: #fff;
  fill-opacity: .125;
  shape-rendering: crispEdges;
}

.meta-column {
	float: right;
	margin-right: 1px;
	width: 220px;
    height: 1000px;
    border: solid black 1px;
    background-color: #FFEFD5;
}

.timeline-column {
	float: left;
}

.title {
	display: block;
	color: black;
	font-weight: bold;
}

</style>

<body>
<div id="left-col" class="timeline-column"></div>
<div id="meta-box" class="meta-column"></div>

<script src="../d3/d3.v2.js"></script>
<script>
var items = {"dates": [["2011-01-25 12:35:00", "2011-01-25 12:40:00", "2011-01-25 12:45:00", "2011-01-25 12:50:00", "2011-01-25 12:55:00", "2011-01-25 13:05:00", "2011-01-25 13:10:00"], ["2011-01-25 13:10:00"], ["2011-01-25 12:35:00", "2011-01-25 12:40:00", "2011-01-25 12:45:00", "2011-01-25 12:50:00", "2011-01-25 13:00:00"], ["2011-01-25 12:35:00", "2011-01-25 12:40:00", "2011-01-25 12:55:00", "2011-01-25 13:00:00", "2011-01-25 13:15:00"], ["2011-01-25 12:40:00", "2011-01-25 12:55:00"], ["2011-01-25 12:40:00", "2011-01-25 12:55:00", "2011-01-25 13:00:00", "2011-01-25 13:05:00"], ["2011-01-25 12:35:00", "2011-01-25 12:40:00", "2011-01-25 12:45:00", "2011-01-25 12:50:00", "2011-01-25 12:55:00", "2011-01-25 13:00:00", "2011-01-25 13:05:00", "2011-01-25 13:10:00", "2011-01-25 13:15:00"], ["2011-01-25 12:40:00", "2011-01-25 12:45:00", "2011-01-25 13:00:00", "2011-01-25 13:05:00", "2011-01-25 13:10:00", "2011-01-25 13:15:00"], ["2011-01-25 12:40:00", "2011-01-25 12:55:00", "2011-01-25 13:00:00", "2011-01-25 13:15:00"], ["2011-01-25 12:40:00", "2011-01-25 12:50:00", "2011-01-25 13:00:00"], ["2011-01-25 12:40:00", "2011-01-25 12:45:00", "2011-01-25 12:50:00", "2011-01-25 13:00:00", "2011-01-25 13:05:00"], ["2011-01-25 12:35:00", "2011-01-25 12:45:00", "2011-01-25 12:50:00"], ["2011-01-25 12:35:00", "2011-01-25 12:40:00", "2011-01-25 12:45:00", "2011-01-25 12:55:00"], ["2011-01-25 12:45:00", "2011-01-25 12:50:00", "2011-01-25 13:05:00", "2011-01-25 13:10:00", "2011-01-25 13:15:00"], ["2011-01-25 12:40:00", "2011-01-25 12:45:00", "2011-01-25 12:50:00", "2011-01-25 13:15:00"], ["2011-01-25 12:40:00", "2011-01-25 12:45:00", "2011-01-25 12:50:00", "2011-01-25 12:55:00", "2011-01-25 13:00:00", "2011-01-25 13:15:00"], ["2011-01-25 12:40:00", "2011-01-25 12:45:00", "2011-01-25 13:05:00"], ["2011-01-25 12:45:00", "2011-01-25 12:50:00", "2011-01-25 12:55:00", "2011-01-25 13:00:00", "2011-01-25 13:05:00", "2011-01-25 13:15:00"], ["2011-01-25 12:35:00", "2011-01-25 12:45:00", "2011-01-25 12:50:00", "2011-01-25 12:55:00", "2011-01-25 13:00:00", "2011-01-25 13:05:00", "2011-01-25 13:10:00"], ["2011-01-25 12:35:00", "2011-01-25 12:45:00"], ["2011-01-25 12:45:00", "2011-01-25 12:50:00", "2011-01-25 12:55:00", "2011-01-25 13:15:00"], ["2011-01-25 12:40:00", "2011-01-25 12:45:00", "2011-01-25 12:50:00", "2011-01-25 12:55:00"], ["2011-01-25 12:40:00", "2011-01-25 12:50:00", "2011-01-25 12:55:00", "2011-01-25 13:00:00", "2011-01-25 13:10:00"], ["2011-01-25 12:50:00", "2011-01-25 12:55:00", "2011-01-25 13:00:00", "2011-01-25 13:15:00"], ["2011-01-25 12:45:00", "2011-01-25 13:05:00", "2011-01-25 13:10:00"], ["2011-01-25 12:35:00", "2011-01-25 12:50:00", "2011-01-25 12:55:00", "2011-01-25 13:00:00", "2011-01-25 13:10:00"], ["2011-01-25 12:50:00", "2011-01-25 12:55:00", "2011-01-25 13:00:00", "2011-01-25 13:05:00"], ["2011-01-25 12:50:00", "2011-01-25 13:15:00"], ["2011-01-25 12:40:00", "2011-01-25 12:45:00", "2011-01-25 12:50:00", "2011-01-25 12:55:00", "2011-01-25 13:15:00"], ["2011-01-25 12:40:00", "2011-01-25 12:50:00", "2011-01-25 12:55:00", "2011-01-25 13:00:00", "2011-01-25 13:05:00"], ["2011-01-25 12:55:00", "2011-01-25 13:00:00", "2011-01-25 13:15:00"], ["2011-01-25 12:45:00", "2011-01-25 12:50:00", "2011-01-25 12:55:00"], ["2011-01-25 12:50:00", "2011-01-25 12:55:00", "2011-01-25 13:00:00", "2011-01-25 13:05:00", "2011-01-25 13:10:00", "2011-01-25 13:15:00", "2011-01-25 13:20:00"], ["2011-01-25 13:00:00", "2011-01-25 13:05:00", "2011-01-25 13:10:00", "2011-01-25 13:15:00", "2011-01-25 13:20:00"], ["2011-01-25 12:40:00", "2011-01-25 13:00:00", "2011-01-25 13:05:00"], ["2011-01-25 12:55:00", "2011-01-25 13:00:00"], ["2011-01-25 12:40:00", "2011-01-25 12:45:00", "2011-01-25 12:50:00", "2011-01-25 13:00:00", "2011-01-25 13:10:00", "2011-01-25 13:15:00"], ["2011-01-25 12:45:00", "2011-01-25 12:50:00", "2011-01-25 12:55:00"], ["2011-01-25 12:40:00", "2011-01-25 12:50:00", "2011-01-25 12:55:00", "2011-01-25 13:10:00"], ["2011-01-25 12:50:00", "2011-01-25 12:55:00", "2011-01-25 13:00:00", "2011-01-25 13:05:00"], ["2011-01-25 12:40:00", "2011-01-25 12:55:00", "2011-01-25 13:05:00", "2011-01-25 13:10:00", "2011-01-25 13:15:00", "2011-01-25 13:20:00"], ["2011-01-25 13:00:00"], ["2011-01-25 12:55:00", "2011-01-25 13:00:00", "2011-01-25 13:05:00"], ["2011-01-25 13:00:00", "2011-01-25 13:10:00"], ["2011-01-25 12:45:00", "2011-01-25 12:55:00", "2011-01-25 13:00:00", "2011-01-25 13:10:00"], ["2011-01-25 12:35:00", "2011-01-25 12:45:00", "2011-01-25 12:50:00", "2011-01-25 12:55:00", "2011-01-25 13:10:00", "2011-01-25 13:15:00"], ["2011-01-25 12:45:00", "2011-01-25 12:55:00", "2011-01-25 13:05:00", "2011-01-25 13:10:00", "2011-01-25 13:15:00"], ["2011-01-25 12:40:00", "2011-01-25 13:00:00", "2011-01-25 13:10:00"], ["2011-01-25 12:55:00", "2011-01-25 13:10:00"], ["2011-01-25 13:10:00"], ["2011-01-25 13:05:00", "2011-01-25 13:10:00"], ["2011-01-25 12:40:00", "2011-01-25 12:45:00"], ["2011-01-25 12:40:00", "2011-01-25 12:50:00", "2011-01-25 13:00:00", "2011-01-25 13:10:00", "2011-01-25 13:15:00"], ["2011-01-25 12:35:00", "2011-01-25 12:55:00"], ["2011-01-25 12:40:00", "2011-01-25 12:50:00", "2011-01-25 13:00:00", "2011-01-25 13:10:00", "2011-01-25 13:15:00"]], "meta": [{"Terms": [["block", 8], ["bumbus", 8], ["pleas", 8], ["user", 8], ["500", 4], ["current", 4], ["photo", 4], ["via", 4], ["coverag", 2], ["follow", 2]], "Locations": [["Egypt", 1]], "Mentioned Persons": [["User", 8], ["Ghafari Fuck", 1]], "Authors": [15]}, {"Terms": [["che", 1], ["effettivament", 1], ["egitto", 1], ["ha", 1], ["hashtag", 1], ["impression", 1], ["qualcosa", 1], ["seguendo", 1], ["si", 1], ["stia", 1]], "Locations": [["Seguendo", 1]], "Mentioned Persons": [["Egitto", 1]], "Authors": [1]}, {"Terms": [["86", 3], ["ahmedabdelaziz", 3], ["eldow", 3], ["everyon", 3], ["gam3et", 3], ["go", 3], ["insan", 3], ["protest", 3], ["shubra", 3], ["shutdown", 3]], "Locations": [], "Mentioned Persons": [["Ahmedabdelaziz", 3], ["Sandmonkey", 2]], "Authors": [5]}, {"Terms": [["3arabawi", 5], ["aspx", 5], ["aswan", 5], ["continu", 5], ["giza", 5], ["mansoura", 5], ["add", 1], ["creat", 1], ["isn", 1], ["one", 1]], "Locations": [], "Mentioned Persons": [["Cairo Aswan Mansoura Giza", 5]], "Authors": [7]}, {"Terms": [["aljazeera", 1], ["big", 1], ["broadcast", 1], ["day", 1], ["demonstr", 1], ["direct", 1], ["footag", 1], ["live", 1], ["mark", 1], ["new", 1]], "Locations": [["Egypt", 1]], "Mentioned Persons": [["Cairo RT", 1]], "Authors": [2]}, {"Terms": [["polic", 4], ["anoth", 3], ["break", 3], ["clash", 3], ["cordon", 3], ["court", 3], ["cycl", 3], ["form", 3], ["happen", 3], ["high", 3]], "Locations": [], "Mentioned Persons": [], "Authors": [3]}, {"Terms": [["polic", 10], ["allow", 9], ["block", 9], ["censorship", 9], ["collabor", 9], ["despit", 9], ["egyptian", 9], ["illeg", 9], ["internet", 9], ["isp", 9]], "Locations": [["Tunisian", 1]], "Mentioned Persons": [["Egyptian", 9], ["Anger Mubarak", 1], ["Sidibouzid", 1]], "Authors": [12]}, {"Terms": [["protest", 6], ["watch", 6], ["al", 5], ["excit", 5], ["great", 5], ["interest", 5], ["jazeera", 5], ["tunisian", 5], ["6april", 1], ["attack", 1]], "Locations": [["Egypt", 5]], "Mentioned Persons": [["Jazeera", 5], ["Mubarak", 1]], "Authors": [7]}, {"Terms": [["protest", 7], ["aljazeera", 4], ["even", 4], ["forc", 4], ["protect", 4], ["say", 4], ["secur", 4], ["tuni", 2], ["!\"", 1], ["3arabawi", 1]], "Locations": [["Tunisia", 1]], "Mentioned Persons": [["Tunis Tunis", 1]], "Authors": [8]}, {"Terms": [["3awzeen", 3], ["7okm", 3], ["86", 3], ["baltaggyia", 3], ["dud", 3], ["el", 3], ["na", 3], ["sawra", 3], ["sha3bya", 3], ["ya", 3]], "Locations": [], "Mentioned Persons": [], "Authors": [4]}, {"Terms": [["protest", 5], ["!!!", 4], ["feel", 4], ["internet", 4], ["multimedi", 4], ["part", 4], ["world", 4], ["bambus", 3], ["better", 3], ["instead", 3]], "Locations": [["Egypt", 1], ["Egyptian", 1]], "Mentioned Persons": [["Qik", 3]], "Authors": [9]}, {"Terms": [["alexandria", 3], ["balconi", 3], ["chant", 3], ["elderli", 3], ["mubarak", 3], ["women", 3], ["gil", 1], ["got", 1], ["like", 1], ["look", 1]], "Locations": [], "Mentioned Persons": [["Gil", 1], ["Hooriali", 1]], "Authors": [4]}, {"Terms": [["el", 4], ["abdel", 3], ["aziz", 3], ["batal", 3], ["dewal", 3], ["gamaat", 3], ["imbaba", 3], ["mofa", 3], ["near", 3], ["protest", 3]], "Locations": [], "Mentioned Persons": [["Happy", 1], ["Salamander In", 1]], "Authors": [5]}, {"Terms": [["arm", 12], ["26", 6], ["brilliant", 6], ["father", 6], ["juli", 6], ["mother", 6], ["mubarak", 6], ["old", 6], ["shout", 6], ["son", 6]], "Locations": [], "Mentioned Persons": [["Egypt RT Ssirgany RT", 1], ["Qatar", 1]], "Authors": [9]}, {"Terms": [["polic", 5], ["good", 4], ["handl", 4], ["harder", 4], ["lot", 4], ["place", 4], ["protest", 4], ["rel", 4], ["see", 4], ["seri", 4]], "Locations": [["Egypt", 4]], "Mentioned Persons": [["Good", 4], ["Azhar", 1]], "Authors": [5]}, {"Terms": [["protest", 18], ["assiut", 16], ["detain", 16], ["govt", 16], ["secur", 16], ["audio", 2], ["dispatch", 2], ["dramat", 2], ["boug", 1], ["ca", 1]], "Locations": [], "Mentioned Persons": [["Cairo Assiut", 16], ["Egypte RT", 1]], "Authors": [18]}, {"Terms": [["access", 3], ["author", 3], ["block", 3], ["egyptian", 3], ["expect", 3], ["news", 3], ["photo", 3], ["prevent", 3], ["sever", 3], ["share", 3]], "Locations": [["Egyptian", 3]], "Mentioned Persons": [], "Authors": [3]}, {"Terms": [["protest", 18], ["airport", 16], ["al", 16], ["bedouin", 16], ["gora", 16], ["near", 16], ["prepar", 16], ["sinai", 16], ["ba2a", 2], ["emshe", 2]], "Locations": [], "Mentioned Persons": [["Gora", 16], ["Mubarak", 2], ["Assiut", 1], ["Egypt Jan25", 1], ["Yalla Egypt RT", 1]], "Authors": [20]}, {"Terms": [["protest", 6], ["via", 5], ["excel", 3], ["pic", 3], ["show", 3], ["flower", 2], ["follow", 2], ["give", 2], ["live", 2], ["policemen", 2]], "Locations": [["Egyptian", 1]], "Mentioned Persons": [["Amatoun RT Alshaheeed", 1]], "Authors": [8]}, {"Terms": [["3effat", 2], ["ahm", 2], ["batal", 2], ["egyptian", 2], ["el", 2], ["interfer", 2], ["march", 2], ["ordinari", 2], ["polic", 2], ["protest", 2]], "Locations": [], "Mentioned Persons": [], "Authors": [2]}, {"Terms": [["3arabawi", 4], ["protest", 4], ["\".", 3], ["chant", 3], ["foreign", 3], ["front", 3], ["ministri", 3], ["mubarak", 3], ["other", 3], ["shubra", 3]], "Locations": [], "Mentioned Persons": [["Cairo Jan25", 3], ["Mubarak", 3], ["Shawn Square", 1], ["Twitpic", 1]], "Authors": [5]}, {"Terms": [["age", 4], ["come", 4], ["faster", 4], ["flag", 4], ["group", 4], ["peopl", 4], ["ralli", 4], ["video", 4]], "Locations": [], "Mentioned Persons": [["Tunisia Egypt", 4]], "Authors": [4]}, {"Terms": [["protest", 11], ["3effat", 3], ["chant", 3], ["earth", 3], ["life", 3], ["never", 3], ["seen", 3], ["shake", 3], ["ve", 3], ["video", 3]], "Locations": [], "Mentioned Persons": [["Al Jazeera Mubasher", 1], ["Al Jazeera Mubasher RT", 1], ["Egypt Estimate", 1], ["Selnadeem Protesters Egypt", 1]], "Authors": [10]}, {"Terms": [["://", 2], ["com", 2], ["http", 2], ["20", 1], ["b4", 1], ["come", 1], ["csf", 1], ["day", 1], ["dokki", 1], ["downtown", 1]], "Locations": [["Egypt", 1]], "Mentioned Persons": [["Ghafari Jan25", 1]], "Authors": [4]}, {"Terms": [["3effat", 3], ["dowal", 3], ["el", 3], ["gam3et", 3], ["photo", 3], ["protest", 3], ["st", 3]], "Locations": [], "Mentioned Persons": [], "Authors": [2]}, {"Terms": [["polic", 6], ["art", 3], ["do", 3], ["honra", 3], ["mim", 3], ["minha", 3], ["participar", 3], ["protesto", 3], ["quanta", 3], ["86", 2]], "Locations": [["Kasr", 2]], "Mentioned Persons": [["Aine Jan25", 2], ["Kefaya", 1]], "Authors": [9]}, {"Terms": [["websit", 16], ["anonymous", 8], ["block", 8], ["com", 8], ["enter", 8], ["go", 8], ["follow", 7], ["today", 7], ["url", 4], ["access", 1]], "Locations": [["Egypt", 1]], "Mentioned Persons": [["Follow", 7]], "Authors": [8]}, {"Terms": [["video", 3], ["demonstr", 2], ["live", 2], ["stream", 2], ["comrad", 1], ["fantast", 1], ["spirit", 1]], "Locations": [["Egypt", 2]], "Mentioned Persons": [["Live", 2], ["Cairo", 1]], "Authors": [3]}, {"Terms": [["video", 9], ["protest", 6], ["al", 5], ["appar", 5], ["jazeera", 5], ["live", 5], ["still", 5], ["ustream", 5], ["work", 5], ["mubash", 4]], "Locations": [], "Mentioned Persons": [["Cairo", 6], ["Ustream", 4], ["Tahrir Square", 3], ["Goosebumps Al Jazeera Mubasher", 2], ["Al Jazeera Arabic", 1]], "Authors": [11]}, {"Terms": [["protest", 5], ["10", 4], ["determin", 4], ["happen", 4], ["march", 4], ["stop", 4], ["tahrir", 4], ["thousand", 4], ["whatev", 4], ["3effat", 3]], "Locations": [["Egypt", 2]], "Mentioned Persons": [["Tahrir", 4], ["Sawra", 1]], "Authors": [6]}, {"Terms": [["stream", 2], ["begin", 1], ["clog", 1], ["corrupt", 1], ["could", 1], ["coverag", 1], ["dictatorship", 1], ["enabl", 1], ["end", 1], ["front", 1]], "Locations": [["Egypt", 1]], "Mentioned Persons": [["Hard", 1], ["Mubarak Live", 1]], "Authors": [3]}, {"Terms": [["\"'", 4], ["forward", 4], ["real", 4], ["way", 4]], "Locations": [["Egypt", 3]], "Mentioned Persons": [], "Authors": [4]}, {"Terms": [["chang", 6], ["pictur", 6], ["protest", 6], ["shout", 6], ["corni", 3], ["countri", 3], ["felt", 3], ["know", 3], ["like", 3], ["never", 3]], "Locations": [], "Mentioned Persons": [["Change Jan25 Cairo", 6], ["Cairo Jan25", 2]], "Authors": [11]}, {"Terms": [["000", 6], ["100", 6], ["around", 6], ["could", 6], ["differ", 6], ["neighborhood", 6], ["number", 6], ["protest", 6], ["spread", 6], ["still", 6]], "Locations": [], "Mentioned Persons": [["Cairo", 6], ["Hosni", 1], ["Jeddah", 1], ["Mubarak Saudi Arabia", 1]], "Authors": [7]}, {"Terms": [["atlant", 3], ["dilemma", 3], ["hamid", 3], ["imposs", 3], ["shadi", 3], ["....", 1], ["83", 1], ["avec", 1], ["covet", 1], ["de", 1]], "Locations": [], "Mentioned Persons": [["Tunisia Obama Impossible Dilemma Egypt Shadi Hamid The Atlantic", 2], ["Tunisia Obama Impossible Dilemma Egypt Shadi Hamid The Atlantic Coveting Freedom", 1]], "Authors": [4]}, {"Terms": [["belong", 2], ["campaign", 2], ["demand", 2], ["demo", 2], ["econom", 2], ["ground", 2], ["mirror", 2], ["opposit", 2], ["polit", 2], ["reform", 2]], "Locations": [["Egypt", 2]], "Mentioned Persons": [], "Authors": [2]}, {"Terms": [["\".", 5], ["activist", 5], ["brace", 5], ["day", 5], ["demand", 5], ["fan", 5], ["footbal", 5], ["islamist", 5], ["reform", 5], ["revolut", 5]], "Locations": [["Allthe", 2]], "Mentioned Persons": [["Egypt", 4], ["Mubarak", 1], ["Poss", 1], ["Sandmonkey Had", 1]], "Authors": [9]}, {"Terms": [["class", 5], ["el", 4], ["middl", 4], ["call", 3], ["english", 3], ["facebook", 3], ["folk", 3], ["march", 3], ["mubarak", 3], ["peopl", 3]], "Locations": [["English", 2]], "Mentioned Persons": [["Twitter Facebook", 3], ["Down Mubarak RT", 1]], "Authors": [6]}, {"Terms": [["block", 3], ["inspir", 3], ["activist", 2], ["day", 2], ["egyptian", 2], ["news", 2], ["!!", 1], ["access", 1], ["al", 1], ["attempt", 1]], "Locations": [["Egyptian", 2], ["Egypt", 1], ["Tunisia", 1]], "Mentioned Persons": [["Al Dustour", 1], ["Egypt", 1], ["Hey", 1], ["Linux", 1], ["Tunisia", 1]], "Authors": [5]}, {"Terms": [["go", 6], ["protest", 4], ["happen", 3], ["real", 3], ["someth", 3], ["time", 3], ["wait", 3], ["day", 1], ["dilemma", 1], ["get", 1]], "Locations": [], "Mentioned Persons": [["Cairo", 1]], "Authors": [4]}, {"Terms": [["downtown", 4], ["polic", 3], ["anticip", 2], ["clearli", 2], ["come", 2], ["csf", 2], ["demonstr", 2], ["exceed", 2], ["expect", 2], ["lazoughli", 2]], "Locations": [["Egypt", 2]], "Mentioned Persons": [["Righter", 1], ["Ustream Come", 1]], "Authors": [7]}, {"Terms": [["download", 2], ["fuck", 2], ["photo", 2], ["qik", 2], ["still", 2]], "Locations": [], "Mentioned Persons": [], "Authors": [2]}, {"Terms": [["al", 3], ["day", 3], ["histor", 3], ["jazeera", 3], ["report", 3], ["say", 3]], "Locations": [], "Mentioned Persons": [["Al Jazeera", 3], ["Egypt", 3], ["Cairo JAN25 RT", 2], ["Cairo JAN25", 1]], "Authors": [3]}, {"Terms": [["com", 3], ["4ng3d", 2], ["confirm", 2], ["tcptracerout", 2], ["use", 2], ["verifi", 2], ["2372037", 1], ["live", 1], ["social", 1], ["utm_medium", 1]], "Locations": [], "Mentioned Persons": [["Live Egypt", 1]], "Authors": [3]}, {"Terms": [["alreadi", 3], ["come", 3], ["day", 3], ["histor", 3], ["keep", 3], ["next", 3], ["realtim", 3], ["record", 3], ["regardless", 3], ["watch", 3]], "Locations": [["Lunch", 1]], "Mentioned Persons": [["Egypt", 3], ["Bambuser", 1]], "Authors": [4]}, {"Terms": [["egyptian", 5], ["ask", 4], ["bbc", 4], ["brave", 4], ["contact", 4], ["damascu", 4], ["envi", 4], ["ever", 4], ["final", 4], ["ppl", 4]], "Locations": [["Egyptian", 4], ["Cairo", 2]], "Mentioned Persons": [["Damascus", 4], ["Kafr El Sheikh Tanta", 2], ["Egypt Latest", 1]], "Authors": [15]}, {"Terms": [["protest", 4], ["amaz", 2], ["bridg", 2], ["broke", 2], ["fuck", 2], ["get", 2], ["hit", 2], ["hous", 2], ["injuri", 2], ["lebanon", 2]], "Locations": [["Guardian", 1], ["Mideast", 1]], "Mentioned Persons": [["Fuck We", 2], ["Opera House Cairo RT", 2], ["Live", 1], ["Tunisia Lebanon Egypt", 1], ["Tunisia Live", 1]], "Authors": [7]}, {"Terms": [["com", 4], ["use", 2], ["yfrog", 2], ["!!!", 1], ["altern", 1], ["block", 1], ["chant", 1], ["confirm", 1], ["ghafari", 1], ["h2m2nzsj", 1]], "Locations": [], "Mentioned Persons": [["Egypt", 1], ["Masr Yfrog Photo", 1]], "Authors": [3]}, {"Terms": [["45", 2], ["ago", 2], ["mahmoud", 2], ["min", 2], ["mostafa", 2], ["warch", 2], ["0z", 1], ["give", 1], ["polic", 1], ["protest", 1]], "Locations": [], "Mentioned Persons": [["Warch Mostafa Mahmoud", 2]], "Authors": [3]}, {"Terms": [["lot", 2], ["0z", 1], ["among", 1], ["coverag", 1], ["increas", 1], ["madli", 1], ["news", 1], ["number", 1], ["protest", 1], ["respect", 1]], "Locations": [], "Mentioned Persons": [], "Authors": [1]}, {"Terms": [["protest", 3], ["70", 1], ["aljazeera", 1], ["could", 1], ["domino", 1], ["effect", 1], ["english", 1], ["ever", 1], ["largest", 1], ["like", 1]], "Locations": [["Egypt", 1]], "Mentioned Persons": [["Tunisia Uprisi", 1]], "Authors": [2]}, {"Terms": [["polic", 4], ["gear", 2], ["man", 2], ["one", 2], ["reaji", 2], ["riot", 2], ["stamped", 2], ["stand", 2], ["versu", 2], ["wall", 2]], "Locations": [], "Mentioned Persons": [["Cairo", 2], ["Had", 2]], "Authors": [4]}, {"Terms": [["(&", 3], ["larg", 3], ["latest", 3], ["monitor", 3], ["pix", 3], ["plainscloth", 3], ["protest", 3], ["secur", 3], ["00", 2], ["02", 2]], "Locations": [], "Mentioned Persons": [["Kasar Aini", 2], ["Ustream Check", 2], ["Linaattalah Violence", 1]], "Authors": [7]}, {"Terms": [["di", 1], ["egitto", 1], ["friend", 1], ["heard", 1], ["la", 1], ["marcia", 1], ["place", 1], ["polic", 1], ["protesta", 1], ["releas", 1]], "Locations": [], "Mentioned Persons": [["Egitto Jan25 Egypt", 1]], "Authors": [2]}, {"Terms": [["make", 4], ["10", 3], ["abdelaziz", 3], ["ahm", 3], ["al", 3], ["batal", 3], ["mohandesin", 3], ["protest", 3], ["thousand", 3], ["continu", 2]], "Locations": [["Cairo", 1]], "Mentioned Persons": [["Mubarak Jedda", 2]], "Authors": [6]}], "counts": [[4.0, 7.0, 9.0, 11.0, 12.0, 14.0, 15.0], [1.0], [1.0, 3.0, 4.0, 5.0, 6.0], [2.0, 4.0, 5.0, 6.0, 7.0], [1.0, 2.0], [1.0, 2.0, 3.0, 4.0], [1.0, 3.0, 4.0, 5.0, 7.0, 8.0, 9.0, 10.0, 12.0], [1.0, 2.0, 3.0, 5.0, 6.0, 7.0], [1.0, 2.0, 4.0, 8.0], [1.0, 3.0, 4.0], [2.0, 5.0, 6.0, 8.0, 9.0], [1.0, 3.0, 4.0], [1.0, 2.0, 4.0, 5.0], [1.0, 2.0, 5.0, 8.0, 9.0], [1.0, 2.0, 3.0, 5.0], [2.0, 10.0, 14.0, 16.0, 18.0, 19.0], [1.0, 2.0, 3.0], [7.0, 9.0, 13.0, 17.0, 18.0, 20.0], [1.0, 2.0, 3.0, 4.0, 5.0, 7.0, 8.0], [1.0, 2.0], [1.0, 2.0, 4.0, 5.0], [1.0, 2.0, 3.0, 4.0], [2.0, 3.0, 6.0, 7.0, 10.0], [1.0, 2.0, 3.0, 4.0], [1.0, 2.0, 3.0], [2.0, 4.0, 5.0, 7.0, 9.0], [1.0, 3.0, 7.0, 8.0], [2.0, 3.0], [1.0, 5.0, 9.0, 11.0, 12.0], [1.0, 2.0, 3.0, 5.0, 6.0], [1.0, 2.0, 3.0], [1.0, 3.0, 4.0], [1.0, 2.0, 6.0, 7.0, 9.0, 10.0, 11.0], [1.0, 3.0, 4.0, 6.0, 7.0], [1.0, 4.0, 5.0], [1.0, 2.0], [2.0, 4.0, 5.0, 6.0, 8.0, 9.0], [1.0, 3.0, 6.0], [1.0, 2.0, 4.0, 5.0], [1.0, 2.0, 3.0, 4.0], [1.0, 2.0, 4.0, 5.0, 6.0, 7.0], [2.0], [1.0, 2.0, 3.0], [1.0, 3.0], [1.0, 2.0, 3.0, 4.0], [1.0, 4.0, 7.0, 11.0, 14.0, 15.0], [1.0, 2.0, 3.0, 5.0, 7.0], [1.0, 2.0, 3.0], [1.0, 3.0], [1.0], [1.0, 2.0], [2.0, 4.0], [1.0, 3.0, 5.0, 6.0, 8.0], [1.0, 2.0], [2.0, 4.0, 5.0, 6.0, 7.0]]}

var meta = items.meta
var series = []
var formatDate = d3.time.format('%Y-%m-%d %H:%M:%S');
for (var i=0; i<items.dates.length; i++){
	series[i] = []
	for (var j=0; j<items.dates[i].length; j++){
		series[i][j] = {date: formatDate.parse(items.dates[i][j]), price:items.counts[i][j]}
	}
}

var color = d3.scale.category20c();

var margin = {top: 10, right: 10, bottom: 100, left: 40},
    margin2 = {top: 430, right: 10, bottom: 20, left: 40},
    width = 1600 - margin.left - margin.right,
    height = 500 - margin.top - margin.bottom,
    height2 = 500 - margin2.top - margin2.bottom;

var x = d3.time.scale().range([0, width]),
    x2 = d3.time.scale().range([0, width]),
    y = d3.scale.linear().range([height, 0]),
    y2 = d3.scale.linear().range([height2, 0]);

var xAxis = d3.svg.axis().scale(x).orient("bottom"),
    xAxis2 = d3.svg.axis().scale(x2).orient("bottom"),
    yAxis = d3.svg.axis().scale(y).orient("left");

var brush = d3.svg.brush()
    .x(x2)
    .on("brush", brush);

var area = d3.svg.line()
			 .x(function(d) { return x(d.date); })
			 .y(function(d) { return y(d.price); })
			 .interpolate("monotone");
			 
var area2 = d3.svg.line()
    .x(function(d) { return x2(d.date); })
    .y(function(d) { return y2(d.price); })
    .interpolate("monotone");
    
var svg = d3.select("body").append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom);

d3.select("#left-col").append("svg").attr("d", svg);

svg.append("defs").append("clipPath")
    .attr("id", "clip")
    .append("rect")
    .attr("width", width)
    .attr("height", height);

var focus = svg.append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

var context = svg.append("g")
    .attr("transform", "translate(" + margin2.left + "," + margin2.top + ")"); 

//Find extent of x domain and the max value of y domain. Iterate over all extents and find the largest extent
//x domain must be scaled according to the largest extent
var maxx = d3.max(series[0].map(function(d) { return d.date; }));
var minx = d3.min(series[0].map(function(d) { return d.date; }));
var maxy = 0;
for (var i=0; i<series.length; i++){
	var temp_maxx = d3.max(series[i].map(function(d) { return d.date; }));
	if (temp_maxx > maxx){
		maxx = temp_maxx;
	}
	var temp_minx = d3.min(series[i].map(function(d) { return d.date; }));
	if (temp_minx < minx){
		minx = temp_minx;
	}
	var temp_maxy = d3.max(series[i].map(function(d) { return d.price; }));
	if (temp_maxy > maxy){
		maxy = temp_maxy;
	}
}
console.log(maxx);
console.log(minx);

//Sets the x domain to be equal to the width of the extent	
x.domain([minx, maxx]);
y.domain([0, maxy]);
x2.domain(x.domain());
y2.domain(y.domain());

//Appends the large chart
focus.selectAll(".line")
    .data(series)
    .enter()
    .append("path")
    .attr("clip-path", "url(#clip)")
    .attr("d", area)
    .attr("stroke", function(d, i) {return color(i)})
    .attr("stroke-width", 3)
    .on("mouseover", mouseover)
    .on("mouseout", mouseout)
    .on("click", click);

//Appends invisible circles to show coords
focus.selectAll("circle") 
          .data(series[0]) 
          .enter() 
          .append("circle") 
          .attr("cx", function(d) { return x(d.date); }) 
          .attr("cy", function(d) { return y(d.price); }) 
          .attr("r", 3) 
          .attr("opacity", 10) 
          .append("svg:title").text(function(d) {return "Date: " + d.date + "\nValue: " + d.price;});

//Appends the x axis
focus.append("g")
    .attr("class", "x axis")
    .attr("transform", "translate(0," + height + ")")
    .call(xAxis);
    
//Appends the y axis
focus.append("g")
    .attr("class", "y axis")
    .call(yAxis);
		  
//Appends the small chart
context.selectAll(".line")
    .data(series)
    .enter()
    .append("path")
    .attr("d", area2)
	.attr("stroke", function(d, i) {return color(i)});

//Appends the x axis of the small chart
context.append("g")
    .attr("class", "x axis")
    .attr("transform", "translate(0," + height2 + ")")
    .call(xAxis2);

//Appends the brush of the small chart
context.append("g")
    .attr("class", "x brush")
    .call(brush)
    .selectAll("rect")
    .attr("y", -6)
    .attr("height", height2);

function brush() {
  x.domain(brush.empty() ? x2.domain() : brush.extent());
  focus.selectAll("path").attr("d", area);
  focus.select(".x.axis").call(xAxis);
}

//-------------------EVENT HANDLERS ---------------//
function mouseover(d, i){
	focus.select("path:nth-child("+(i+1)+")").attr("stroke-width", 5);
}

function mouseout(d, i){
	focus.select("path:nth-child("+(i+1)+")").attr("stroke-width", 3);
}

function click(d, i){
	metaBox = d3.select("#meta-box");
	metaBox.html("");
	
	if (meta){
		//Iterate over the JSON object for meta and append the text
		for (var key in meta[i]) {
		  if (meta[i].hasOwnProperty(key)) {
				//Append title
				metaBox.append("text")
				        .attr("class", "title")
				        .text(key);
				console.log(meta[i][key])
				//Append main text
				metaBox.selectAll("g")
				  	   .data(meta[i][key])
				       .enter()
					   .append("text")
					   .append("ul")
					   .text(function(d){console.log(d); return d});
		  }
		}
	}
	else{
		//Append title
		metaBox.append("text")
		        .attr("class", "title")
		        .text("No meta data provided for this element");
	}
}



</script>